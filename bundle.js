(()=>{"use strict";(()=>{class e{#e;#t;#i;constructor(e){this.#e=e,this.#t=!0,this.#i=""}get isValid(){return this.#t}get errorMessage(){return this.#i}checkValidity(){this.setCustomValidity(""),this.#e.checkValidity();let e=this.#e.validity;return e.valid&&(e=this.#n()),this.#t=e.valid,this.#i=this.#s(e),this.isValid}setCustomValidity(e){this.#e.setCustomValidity(e),this.#t=this.#e.validity.valid,this.#i=e}#n(){const e=Object.assign({},this.#e.validity,this.#l(),this.#a());return e.valid=!e.valueMissing&&!e.rangeUnderflow&&!e.rangeOverflow,e}#l(){const e=this.#e.value.trim();return{valueMissing:this.#e.hasAttribute("required")&&""===e}}#a(){if("number"!==this.#e.type)return{rangeUnderflow:!1,rangeOverflow:!1};const{min:e,max:t,value:i}=this.#e;return{rangeUnderflow:""!==e&&+i<+e,rangeOverflow:""!==t&&+i>+t}}#s(e){const t="number"===this.#e.type,{badInput:i,rangeOverflow:n,rangeUnderflow:s,tooLong:l,tooShort:a,valueMissing:o,stepMismatch:r}=e;return t&&i?"Invalid number":t&&r&&"1"===this.#e.step?"Must be an integer":n?"Greater than "+this.#e.max:s?"Less than "+this.#e.min:l?"Max length is "+this.#e.maxLength:a?"Min length is "+this.#e.minLength:!i&&o?"Required":this.#e.validationMessage}}const t=Object.freeze({Shift:"ShiftLeft",Esc:"Escape",Enter:"Enter",Up:"ArrowUp",Down:"ArrowDown"}),i=(e,...t)=>{let i=e[0];for(let s=0;s<t.length;s++)i+=(n=String(t[s]))?n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):"",i+=e[s+1];var n;return i};function n(e,t){const i=(n.canvas||(n.canvas=document.createElement("canvas"))).getContext("2d");return i.font=t,i.measureText(e).width}function s(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)}class l extends HTMLElement{static#o=new Set(["autocomplete","autofocus","disabled","max","maxlength","min","minlength","name","pattern","readonly","required","step","type","value"]);#e;#r;#h;#d={onTrailingIconClick:[],onChangeValue:[],onInput:[]};connectedCallback(){this.innerHTML=this.#u(),this.#e=this.querySelector("input"),this.#r=this.querySelector(".text-input__error"),this.#h=new e(this.#e),this.#c(),this.#m(),this.hasAttribute("value")&&(this.value=this.getAttribute("value"))}disconnectedCallback(){this.setAttribute("value",this.value),window.removeEventListener("visibilitychange",this.#p.bind(this),{capture:!0})}get value(){return this.rawValue.trim()}get rawValue(){return this.#e.value}set value(e){this.#e.value=e||"",this.checkValidity()}checkValidity(){const e=this.#h.checkValidity();return this.#r.textContent=this.#h.errorMessage,e}get errorMessage(){return this.#r.textContent}set errorMessage(e){this.#h.setCustomValidity(e),this.#r.textContent=this.#h.errorMessage}onTrailingIconClick(e){this.#d.onTrailingIconClick.push(e)}onInput(e){this.#d.onInput.push(e)}onChangeValue(e){this.#d.onChangeValue.push(e)}#E(e){"number"!==this.#e.type||e.key!==t.Up&&e.key!==t.Down||e.preventDefault()}#g(){this.checkValidity(),this.#d.onInput.forEach((e=>e(this.value)))}#w(){this.#b()}#v(){this.#d.onTrailingIconClick.forEach((e=>e()))}#b(){this.checkValidity(),this.#d.onChangeValue.forEach((e=>e(this.value)))}#c(){for(const e of this.attributes)l.#o.has(e.name)&&this.#e.setAttribute(e.name,e.value);"number"!==this.getAttribute("type")||this.hasAttribute("step")||this.#e.setAttribute("step","any")}#m(){this.#e.addEventListener("keydown",this.#E.bind(this)),this.#e.addEventListener("input",this.#g.bind(this)),this.#e.addEventListener("change",this.#w.bind(this)),this.querySelector(".text-input__trailing-icon").addEventListener("click",this.#v.bind(this)),window.addEventListener("visibilitychange",this.#p.bind(this),{capture:!0})}#p(){document.activeElement===this.#e&&this.#e.blur()}#u(){const e=this.getAttribute("data-icon")||"";return i`<input class="text-input__input" placeholder="needed for CSS">
                <label class="text-input__label">${this.getAttribute("label")}</label>
                <i class="text-input__trailing-icon material-symbols-outlined">${e}</i>
                <p class="text-input__error"></p>`}static get is(){return"text-input"}}window.customElements.define(l.is,l);class a extends HTMLElement{#V;#y=[];#f=0;#k=-1;#d={onOptionClick:[]};get options(){return this.#y}set options(e){this.#C(e),this.innerHTML=this.#u(),this.#V=this.querySelector("ul"),this.#x(),this.#m()}set filter(e){const t=e.toLowerCase();for(const e of this.querySelectorAll("li")){const{displayName:i}=this.#y[e.dataset.index],n=i.toLowerCase().indexOf(t);e.innerHTML=this.#S(i,n,t.length),e.toggleAttribute("hidden",-1===n)}const i=this.#I();i&&(i.hasAttribute("hidden")?this.#A():i.scrollIntoView({block:"nearest"}))}show(){this.style.display="block",this.#x()}hide(){this.style.display="none",this.#A()}selectNextItem(){const e=this.#M();if(this.hasSelectedElement()){const t=e.indexOf(this.#I());if(e.length-1<=t)return;this.#L(e[t+1].dataset.index)}else{if(0===e.length)return;this.#L(e[0].dataset.index)}}selectPrevItem(){const e=this.#M();if(this.hasSelectedElement()){const t=e.indexOf(this.#I());if(0===t)return;this.#L(e[t-1].dataset.index)}else{if(0===e.length)return;this.#L(e[e.length-1].dataset.index)}}triggerClickOnSelectedItem(){this.hasSelectedElement()&&this.#I().dispatchEvent(new MouseEvent("mousedown"))}hasSelectedElement(){return null!=this.#I()}isVisible(){return"none"!==window.getComputedStyle(this).display}onOptionClick(e){this.#d.onOptionClick.push(e)}connectedCallback(){this.innerHTML=this.#u(),this.#V=this.querySelector("ul"),this.#m()}#C(e){this.#y=[...e].sort(((e,t)=>e.displayName.localeCompare(t.displayName)))}#M(){return[...this.#V.querySelectorAll("li:not([hidden])")]}#m(){for(const e of this.querySelectorAll("li"))e.addEventListener("mousedown",(()=>{const t=this.#y[e.dataset.index];this.#d.onOptionClick.forEach((e=>e(t)))}))}#u(){return`\n            <ul>\n                ${this.#y.map(((e,t)=>i`<li data-index="${t}" title="${e.displayName}">${e.displayName}</li>`)).join("")}\n            </ul>`}#x(){const e=function(e=document.body){return`${s(e,"font-weight")||"normal"} ${s(e,"font-size")||"16px"} ${s(e,"font-family")||"Times New Roman"}`}(),t=this.parentElement.getBoundingClientRect();0===this.#f&&(this.#f=Math.max(...this.#y.map((t=>n(t.displayName,e))),0));const i=Math.max(this.#f+24+22,t.width),l=document.documentElement.clientWidth-t.left;this.#V.style.right=i>l?0:null,this.#V.style.width=`${Math.min(i,document.documentElement.clientWidth)}px`}#I(){return this.querySelector(`li[data-index="${this.#k}"]`)}#L(e){this.#A(),this.#k=e;const t=this.#I();t.classList.add("list-box__item--active"),t.scrollIntoView({block:"nearest"})}#A(){this.#k>=0&&(this.#I().classList.remove("list-box__item--active"),this.#k=-1)}#S(e,t,n){if(t>=0){const s=e.substring(0,t),l=e.substring(t,t+n),a=e.substring(t+n);return i`<span>${s}<mark>${l}</mark>${a}</span>`}return e}static get is(){return"list-box"}}window.customElements.define(a.is,a);class o extends HTMLElement{#e;#T;#D;#N=null;#d={onChangeValue:[]};connectedCallback(){this.innerHTML=this.#u(),this.#e=this.querySelector("text-input"),this.#T=this.querySelector("list-box"),this.#m()}get value(){return this.#D}set value(e){this.#D=e,this.#e.value=e&&e.displayName?e.displayName:""}set initialValue(e){this.value=e,this.#N=e}set options(e){this.#T.options=e}isValid(){return this.#q()&&this.#e.isValid()}onChangeValue(e){this.#d.onChangeValue.push(e)}#g(){this.#O(""),this.#$(),this.#T.isVisible()||this.#T.show()}#_(){this.#$(),this.#T.show()}#U(){this.#P()}#H(e){this.value=e,this.#P()}#R(){this.value={displayName:""},this.#e.querySelector("input").focus()}#B(e){switch([t.Up,t.Down].includes(e.code)&&(e.preventDefault(),e.stopImmediatePropagation()),e.key){case t.Esc:this.#P();break;case t.Enter:this.#T.isVisible()&&(this.#T.hasSelectedElement()?this.#T.triggerClickOnSelectedItem():this.#P());break;case t.Down:this.#T.isVisible()||this.#T.show(),this.#T.selectNextItem();break;case t.Up:this.#T.isVisible()||this.#T.show(),this.#T.selectPrevItem()}}#F(){this.#b()}#P(){this.#T.hide(),this.#b()}#b(){this.#q()&&this.#K()&&(this.#N=this.value,this.#d.onChangeValue.forEach((e=>e(this.value))))}#q(){const e=this.#e.value;if(""===e)return this.#D=null,!0;if(this.value&&this.value.displayName===e)return this.#O(""),!0;for(const t of this.#T.options)if(t.displayName===e)return this.#O(""),this.#D=t,this.#e.value=t.displayName,!0;return this.#D=null,this.#O("Select from list"),!1}#O(e){this.#e.errorMessage=e}#$(){this.#T.filter=this.#e.value}#K(){return this.#N!==this.value}#m(){const e=this.#e.querySelector("input");this.addEventListener("keydown",this.#B.bind(this)),e.addEventListener("input",this.#g.bind(this)),e.addEventListener("blur",this.#U.bind(this)),e.addEventListener("focus",this.#_.bind(this)),this.#e.onTrailingIconClick(this.#R.bind(this)),this.#e.onChangeValue(this.#F.bind(this)),this.#T.onOptionClick(this.#H.bind(this))}#u(){const e=this.hasAttribute("required")?"required":"",t=this.hasAttribute("disabled")?"disabled":"";return i`
            <text-input 
                class="text-input--with-right-icon" 
                label="${this.getAttribute("label")}" 
                ${e}
                ${t}
                data-icon="close"
                autocomplete="off"
            ></text-input>
            <list-box></list-box>`}static get is(){return"typeahead-input"}}window.customElements.define(o.is,o);class r extends HTMLElement{#e;#T;#D;#N=null;#d={onShowDropdown:[],onChangeValue:[]};get value(){return this.#D}set value(e){this.#e.value=e&&e.displayName?e.displayName:"",this.#D=e}set options(e){this.#T.options=e}showDropdown(){this.#T.show(),this.#d.onShowDropdown.forEach((e=>e()))}onShowDropdown(e){this.#d.onShowDropdown.push(e)}onChangeValue(e){this.#d.onChangeValue.push(e)}isValid(){return this.#q()}connectedCallback(){this.innerHTML=this.#u(),this.#e=this.querySelector("text-input"),this.#T=this.querySelector("list-box"),this.#m()}#m(){this.addEventListener("keydown",this.#B.bind(this));const e=this.#e.querySelector("input");e.addEventListener("focus",this.#_.bind(this)),e.addEventListener("focusout",this.#W.bind(this)),e.addEventListener("click",this.#j.bind(this)),this.#T.onOptionClick(this.#H.bind(this))}#_(){this.showDropdown()}#W(){this.#P()}#H(e){this.#e.value=e.displayName,this.#D=e,this.#P()}#j(){this.showDropdown()}#B(e){switch([t.Up,t.Down].includes(e.code)&&(e.preventDefault(),e.stopImmediatePropagation()),e.key){case t.Esc:this.#P(),this.#e.focus();break;case t.Enter:this.#T.isVisible()&&(this.#T.hasSelectedElement()?this.#T.triggerClickOnSelectedItem():this.#T.hide());break;case t.Down:this.#T.isVisible()||this.#T.show(),this.#T.selectNextItem();break;case t.Up:this.#T.isVisible()||this.#T.show(),this.#T.selectPrevItem()}}#P(){this.#T.hide(),this.#b()}#b(){this.#q()&&this.#N!==this.value&&(this.#N=this.value,this.#d.onChangeValue.forEach((e=>e(this.value))))}#q(){return this.#e.hasAttribute("required")&&!this.#e.value?this.#e.errorMessage="Required":this.#e.errorMessage="",this.#e.checkValidity()}#u(){const e=this.hasAttribute("required")?"required":"",t=this.hasAttribute("disabled")?"disabled":"";return i`
            <text-input
                class="text-input--select" 
                label="${this.getAttribute("label")}" 
                ${e}
                ${t}
                data-icon="arrow_drop_down"
                readonly
            ></text-input>
            <list-box></list-box>`}static get is(){return"select-input"}}window.customElements.define(r.is,r)})()})();
//# sourceMappingURL=bundle.js.map
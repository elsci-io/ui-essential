(()=>{"use strict";(()=>{class t{#t;#e;#i;constructor(t){this.#t=t,this.#e=!0,this.#i=""}get isValid(){return this.#e}get errorMessage(){return this.#i}checkValidity(){this.setCustomValidity(""),this.#t.checkValidity();let t=this.#t.validity;return t.valid&&(t=this.#n()),this.#e=t.valid,this.#i=this.#s(t),this.isValid}setCustomValidity(t){this.#t.setCustomValidity(t),this.#e=this.#t.validity.valid,this.#i=t}#n(){const{badInput:t,customError:e,patternMismatch:i,typeMismatch:n,valid:s,rangeOverflow:l,rangeUnderflow:a,tooLong:o,tooShort:r,valueMissing:h,stepMismatch:d}=this.#t.validity,u=Object.assign({},{badInput:t,customError:e,patternMismatch:i,typeMismatch:n,valid:s,rangeOverflow:l,rangeUnderflow:a,tooLong:o,tooShort:r,valueMissing:h,stepMismatch:d},this.#l(),this.#a());return u.valid=!u.valueMissing&&!u.rangeUnderflow&&!u.rangeOverflow,u}#l(){const t=this.#t.value.trim();return{valueMissing:this.#t.hasAttribute("required")&&""===t}}#a(){if("number"!==this.#t.type)return{rangeUnderflow:!1,rangeOverflow:!1};const{min:t,max:e,value:i}=this.#t;return{rangeUnderflow:""!==t&&+i<+t,rangeOverflow:""!==e&&+i>+e}}#s(t){const e="number"===this.#t.type,{badInput:i,rangeOverflow:n,rangeUnderflow:s,tooLong:l,tooShort:a,valueMissing:o,stepMismatch:r}=t;return e&&i?"Invalid number":e&&r&&"1"===this.#t.step?"Must be an integer":n?"Greater than "+this.#t.max:s?"Less than "+this.#t.min:l?"Max length is "+this.#t.maxLength:a?"Min length is "+this.#t.minLength:!i&&o?"Required":this.#t.validationMessage}}const e=Object.freeze({Shift:"ShiftLeft",Esc:"Escape",Enter:"Enter",Up:"ArrowUp",Down:"ArrowDown"}),i=(t,...e)=>{let i=t[0];for(let s=0;s<e.length;s++)i+=(n=String(e[s]))?n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):"",i+=t[s+1];var n;return i};function n(t,e){const i=(n.canvas||(n.canvas=document.createElement("canvas"))).getContext("2d");return i.font=e,i.measureText(t).width}function s(t,e){return window.getComputedStyle(t,null).getPropertyValue(e)}class l extends HTMLElement{static#o=new Set(["autocomplete","autofocus","disabled","max","maxlength","min","minlength","name","pattern","readonly","required","step","type","value"]);#t;#r;#h;#d={onTrailingIconClick:[],onChangeValue:[],onInput:[]};connectedCallback(){this.innerHTML=this.#u(),this.#t=this.querySelector("input"),this.#r=this.querySelector(".text-input__error"),this.#h=new t(this.#t),this.#c(),this.#m(),this.hasAttribute("value")&&(this.value=this.getAttribute("value"))}disconnectedCallback(){this.setAttribute("value",this.value),window.removeEventListener("visibilitychange",this.#p.bind(this),{capture:!0})}get value(){return this.rawValue.trim()}get rawValue(){return this.#t.value}set value(t){this.#t.value=function(t){return!(void 0===t||!Number.isFinite(t))}(t)||"string"==typeof t?t:"",this.checkValidity()}checkValidity(){const t=this.#h.checkValidity();return this.#r.textContent=this.#h.errorMessage,t}get errorMessage(){return this.#r.textContent}set errorMessage(t){this.#h.setCustomValidity(t),this.#r.textContent=this.#h.errorMessage}onTrailingIconClick(t){this.#d.onTrailingIconClick.push(t)}onInput(t){this.#d.onInput.push(t)}onChangeValue(t){this.#d.onChangeValue.push(t)}#E(t){"number"!==this.#t.type||t.key!==e.Up&&t.key!==e.Down||t.preventDefault()}#g(){this.checkValidity(),this.#d.onInput.forEach((t=>t(this.value)))}#w(){this.#b()}#v(){this.#d.onTrailingIconClick.forEach((t=>t()))}#b(){this.checkValidity(),this.#d.onChangeValue.forEach((t=>t(this.value)))}#c(){for(const t of this.attributes)l.#o.has(t.name)&&this.#t.setAttribute(t.name,t.value);"number"!==this.getAttribute("type")||this.hasAttribute("step")||this.#t.setAttribute("step","any")}#m(){this.#t.addEventListener("keydown",this.#E.bind(this)),this.#t.addEventListener("input",this.#g.bind(this)),this.#t.addEventListener("change",this.#w.bind(this)),this.querySelector(".text-input__trailing-icon").addEventListener("click",this.#v.bind(this)),window.addEventListener("visibilitychange",this.#p.bind(this),{capture:!0})}#p(){document.activeElement===this.#t&&this.#t.blur()}#u(){const t=this.getAttribute("data-icon")||"";return i`<input class="text-input__input" placeholder="needed for CSS">
                <label class="text-input__label">${this.getAttribute("label")}</label>
                <i class="text-input__trailing-icon material-symbols-outlined">${t}</i>
                <p class="text-input__error"></p>`}static get is(){return"text-input"}}window.customElements.define(l.is,l);class a extends HTMLElement{#y;#V=[];#f=0;#k=-1;#d={onOptionClick:[]};get options(){return this.#V}set options(t){this.#C(t),this.innerHTML=this.#u(),this.#y=this.querySelector("ul"),this.#x(),this.#m()}set filter(t){const e=t.toLowerCase();for(const t of this.querySelectorAll("li")){const{displayName:i}=this.#V[t.dataset.index],n=i.toLowerCase().indexOf(e);t.innerHTML=this.#S(i,n,e.length),t.toggleAttribute("hidden",-1===n)}const i=this.#I();i&&(i.hasAttribute("hidden")?this.#M():i.scrollIntoView({block:"nearest"}))}show(){this.style.display="block",this.#x()}hide(){this.style.display="none",this.#M()}selectNextItem(){const t=this.#L();if(this.hasSelectedElement()){const e=t.indexOf(this.#I());if(t.length-1<=e)return;this.#A(t[e+1].dataset.index)}else{if(0===t.length)return;this.#A(t[0].dataset.index)}}selectPrevItem(){const t=this.#L();if(this.hasSelectedElement()){const e=t.indexOf(this.#I());if(0===e)return;this.#A(t[e-1].dataset.index)}else{if(0===t.length)return;this.#A(t[t.length-1].dataset.index)}}triggerClickOnSelectedItem(){this.hasSelectedElement()&&this.#I().dispatchEvent(new MouseEvent("mousedown"))}hasSelectedElement(){return null!=this.#I()}isVisible(){return"none"!==window.getComputedStyle(this).display}onOptionClick(t){this.#d.onOptionClick.push(t)}connectedCallback(){this.innerHTML=this.#u(),this.#y=this.querySelector("ul"),this.#m()}#C(t){this.#V=[...t].sort(((t,e)=>t.displayName.localeCompare(e.displayName)))}#L(){return[...this.#y.querySelectorAll("li:not([hidden])")]}#m(){for(const t of this.querySelectorAll("li"))t.addEventListener("mousedown",(()=>{const e=this.#V[t.dataset.index];this.#d.onOptionClick.forEach((t=>t(e)))}))}#u(){return`\n            <ul>\n                ${this.#V.map(((t,e)=>i`<li data-index="${e}" title="${t.displayName}">${t.displayName}</li>`)).join("")}\n            </ul>`}#x(){const t=function(t=document.body){return`${s(t,"font-weight")||"normal"} ${s(t,"font-size")||"16px"} ${s(t,"font-family")||"Times New Roman"}`}(),e=this.parentElement.getBoundingClientRect();0===this.#f&&(this.#f=Math.max(...this.#V.map((e=>n(e.displayName,t))),0));const i=Math.max(this.#f+24+22,e.width),l=document.documentElement.clientWidth-e.left;this.#y.style.right=i>l?0:null,this.#y.style.width=`${Math.min(i,document.documentElement.clientWidth)}px`}#I(){return this.querySelector(`li[data-index="${this.#k}"]`)}#A(t){this.#M(),this.#k=t;const e=this.#I();e.classList.add("list-box__item--active"),e.scrollIntoView({block:"nearest"})}#M(){this.#k>=0&&(this.#I().classList.remove("list-box__item--active"),this.#k=-1)}#S(t,e,n){if(e>=0){const s=t.substring(0,e),l=t.substring(e,e+n),a=t.substring(e+n);return i`<span>${s}<mark>${l}</mark>${a}</span>`}return t}static get is(){return"list-box"}}window.customElements.define(a.is,a);class o extends HTMLElement{#t;#T;#D;#N=null;#d={onChangeValue:[]};connectedCallback(){this.innerHTML=this.#u(),this.#t=this.querySelector("text-input"),this.#T=this.querySelector("list-box"),this.#m()}get value(){return this.#D}set value(t){this.#D=t,this.#t.value=t&&t.displayName?t.displayName:""}set initialValue(t){this.value=t,this.#N=t}set options(t){this.#T.options=t}checkValidity(){return this.#q()&&this.#t.checkValidity()}onChangeValue(t){this.#d.onChangeValue.push(t)}#g(){this.#O(""),this.#$(),this.#T.isVisible()||this.#T.show()}#_(){this.#$(),this.#T.show()}#U(){this.#P()}#H(t){this.value=t,this.#P()}#R(){this.value={displayName:""},this.#t.querySelector("input").focus()}#B(t){switch([e.Up,e.Down].includes(t.code)&&(t.preventDefault(),t.stopImmediatePropagation()),t.key){case e.Esc:this.#P();break;case e.Enter:this.#T.isVisible()&&(this.#T.hasSelectedElement()?this.#T.triggerClickOnSelectedItem():this.#P());break;case e.Down:this.#T.isVisible()||this.#T.show(),this.#T.selectNextItem();break;case e.Up:this.#T.isVisible()||this.#T.show(),this.#T.selectPrevItem()}}#F(){this.#b()}#P(){this.#T.hide(),this.#b()}#b(){this.#q()&&this.#K()&&(this.#N=this.value,this.#d.onChangeValue.forEach((t=>t(this.value))))}#q(){const t=this.#t.value;if(""===t)return this.#D=null,!0;if(this.value&&this.value.displayName===t)return this.#O(""),!0;for(const e of this.#T.options)if(e.displayName===t)return this.#O(""),this.#D=e,this.#t.value=e.displayName,!0;return this.#D=null,this.#O("Select from list"),!1}#O(t){this.#t.errorMessage=t}#$(){this.#T.filter=this.#t.value}#K(){return this.#N!==this.value}#m(){const t=this.#t.querySelector("input");this.addEventListener("keydown",this.#B.bind(this)),t.addEventListener("input",this.#g.bind(this)),t.addEventListener("blur",this.#U.bind(this)),t.addEventListener("focus",this.#_.bind(this)),this.#t.onTrailingIconClick(this.#R.bind(this)),this.#t.onChangeValue(this.#F.bind(this)),this.#T.onOptionClick(this.#H.bind(this))}#u(){const t=this.hasAttribute("required")?"required":"",e=this.hasAttribute("disabled")?"disabled":"";return i`
            <text-input 
                class="text-input--with-right-icon" 
                label="${this.getAttribute("label")}" 
                ${t}
                ${e}
                data-icon="close"
                autocomplete="off"
            ></text-input>
            <list-box></list-box>`}static get is(){return"typeahead-input"}}window.customElements.define(o.is,o);class r extends HTMLElement{#t;#T;#D;#N=null;#d={onShowDropdown:[],onChangeValue:[]};get value(){return this.#D}set value(t){this.#t.value=t&&t.displayName?t.displayName:"",this.#D=t}set options(t){this.#T.options=t}showDropdown(){this.#T.show(),this.#d.onShowDropdown.forEach((t=>t()))}onShowDropdown(t){this.#d.onShowDropdown.push(t)}onChangeValue(t){this.#d.onChangeValue.push(t)}isValid(){return this.#q()}connectedCallback(){this.innerHTML=this.#u(),this.#t=this.querySelector("text-input"),this.#T=this.querySelector("list-box"),this.#m()}#m(){this.addEventListener("keydown",this.#B.bind(this));const t=this.#t.querySelector("input");t.addEventListener("focus",this.#_.bind(this)),t.addEventListener("focusout",this.#W.bind(this)),t.addEventListener("click",this.#j.bind(this)),this.#T.onOptionClick(this.#H.bind(this))}#_(){this.showDropdown()}#W(){this.#P()}#H(t){this.#t.value=t.displayName,this.#D=t,this.#P()}#j(){this.showDropdown()}#B(t){switch([e.Up,e.Down].includes(t.code)&&(t.preventDefault(),t.stopImmediatePropagation()),t.key){case e.Esc:this.#P(),this.#t.focus();break;case e.Enter:this.#T.isVisible()&&(this.#T.hasSelectedElement()?this.#T.triggerClickOnSelectedItem():this.#T.hide());break;case e.Down:this.#T.isVisible()||this.#T.show(),this.#T.selectNextItem();break;case e.Up:this.#T.isVisible()||this.#T.show(),this.#T.selectPrevItem()}}#P(){this.#T.hide(),this.#b()}#b(){this.#q()&&this.#N!==this.value&&(this.#N=this.value,this.#d.onChangeValue.forEach((t=>t(this.value))))}#q(){return this.#t.hasAttribute("required")&&!this.#t.value?this.#t.errorMessage="Required":this.#t.errorMessage="",this.#t.checkValidity()}#u(){const t=this.hasAttribute("required")?"required":"",e=this.hasAttribute("disabled")?"disabled":"";return i`
            <text-input
                class="text-input--select" 
                label="${this.getAttribute("label")}" 
                ${t}
                ${e}
                data-icon="arrow_drop_down"
                readonly
            ></text-input>
            <list-box></list-box>`}static get is(){return"select-input"}}window.customElements.define(r.is,r)})()})();
//# sourceMappingURL=bundle.js.map